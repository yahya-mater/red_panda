<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Store - Admin Panel</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <div class="w3-bar w3-white w3-card w3-large">
        <a href="index.html" class="w3-bar-item w3-button w3-hover-blue w3-mobile">Home</a>
        <a href="whats-new.html" class="w3-bar-item w3-button w3-hover-blue w3-mobile">What's New</a>
        <a href="admin.html" class="w3-bar-item w3-button w3-blue w3-mobile w3-right">Admin</a>
    </div>

    <!-- Hero Section -->
    <header class="w3-container hero-section w3-center w3-padding-64">
        <h1 class="w3-margin w3-jumbo w3-text-white">Admin Panel</h1>
        <p class="w3-xlarge w3-text-white w3-opacity">Manage Your Store Products</p>
    </header>

    
    <!-- Search Section -->
    <!-- Admin Controls -->
    <div class="search-container">
        <div class="w3-container w3-padding-16">
            <div class="search-wrapper">
                <div class="search-with-extra-container">
                    <div class="search-input-container" style="width: 100%;">
                        <input class="search-input" type="text" id="searchInput" placeholder="Search our menu..." onkeyup="searchAdminProducts()">
                        <button class="search-button" onclick="searchAdminProducts()">
                            <i class="fa fa-search"></i>Search
                        </button>
                    </div>

                    <div class="search-input-container">
                        <!-- Add New Product Button -->
                        <button class="w3-button w3-green w3-round w3-block" onclick="showAddProductForm()">
                            
                            <p style="padding-left: 0px;padding-right: 25px;"><i class="fa fa-plus"></i> Add Product</p>
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Product Form (Initially Hidden) -->
    <div id="productForm" class="w3-container w3-card w3-white w3-margin w3-padding" style="display:none;">
        <h3 id="formTitle">Add New Product</h3>
        <form id="productFormElement">
            <!-- BACKEND HOOK: Form will submit to database API endpoint -->
            <input type="hidden" id="productId" name="productId" value="">
            
            <div class="w3-row-padding">
                <div class="w3-col m6 s12">
                    <label class="w3-text-blue"><b>Product Name</b></label>
                    <input class="w3-input w3-border w3-margin-bottom" type="text" id="productName" name="productName" required>
                </div>
                <div class="w3-col m6 s12">
                    <label class="w3-text-blue"><b>Price ($)</b></label>
                    <input class="w3-input w3-border w3-margin-bottom" type="number" step="0.01" id="productPrice" name="productPrice" required>
                </div>
            </div>

            <div class="w3-row-padding">
                <div class="w3-col m6 s12">
                    <label class="w3-text-blue"><b>Discount Percentage (%)</b></label>
                    <input class="w3-input w3-border w3-margin-bottom" type="number" min="0" max="100" id="productDiscount" name="productDiscount" value="0">
                </div>
                <div class="w3-col m6 s12">
                    <label class="w3-text-blue"><b>Category</b></label>
                    <select class="w3-select w3-border w3-margin-bottom" id="productCategory" name="productCategory">
                        <!-- BACKEND HOOK: Categories should be loaded from database -->
                        <option value="Electronics">Electronics</option>
                        <option value="Computers">Computers</option>
                        <option value="Accessories">Accessories</option>
                        <option value="Mobile">Mobile</option>
                    </select>
                </div>
            </div>
            
            <div class="w3-padding">
                <label class="w3-text-blue"><b>Description</b></label>
                <textarea class="w3-input w3-border w3-margin-bottom" id="productDescription" name="productDescription" rows="4" required></textarea>
            
                <label class="w3-text-blue"><b>Image URL</b></label>
                <input class="w3-input w3-border w3-margin-bottom" type="url" id="productImage" name="productImage" placeholder="https://example.com/image.jpg">
            
            
                <div class="w3-row w3-margin-top">
                    <div class="w3-col m6 s12 w3-margin-bottom">
                        <button class="w3-button w3-green w3-block" type="submit">
                            <i class="fa fa-save"></i> Save Product
                        </button>
                    </div>
                    <div class="w3-col m6 s12 w3-margin-bottom">
                        <button class="w3-button w3-grey w3-block" type="button" onclick="hideProductForm()">
                            <i class="fa fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    
    <!-- Products Management Section -->
    <div class="w3-container w3-padding-16">
        <h2 class="w3-text-blue">Manage Products</h2>
        <div class="w3-row-padding" id="adminProductsContainer">
            
            <!-- BACKEND HOOK: This section will be populated by database query results -->
            <!-- Sample Admin Product Card 1 - Replace with dynamic content from database -->
            <div class="w3-col l4 m6 s12 w3-margin-bottom admin-product-card" data-name="laptop computer" data-id="1">
                <div class="w3-card-4 w3-white">
                    <img src="https://dummyimage.com/300x200" alt="Product" style="width:100%">
                    <div class="w3-container">
                        <h4><b>Laptop Computer</b></h4>
                        <p>High-performance laptop for work and gaming.</p>
                        
                        <!-- Price and Discount Info -->
                        <div class="w3-row w3-margin-bottom">
                            <div class="w3-col w6">
                                <p><b>Price:</b> $999.99</p>
                                <p><b>Discount:</b> 15%</p>
                            </div>
                            <div class="w3-col w6">
                                <p><b>Final Price:</b> $849.99</p>
                                <p><b>Category:</b> Computers</p>
                            </div>
                        </div>
                        
                        <!-- Admin Action Buttons -->
                        <div class="w3-row">
                            <div class="w3-col w6 w3-margin-bottom">
                                <button class="w3-button w3-blue w3-small w3-block" onclick="editProduct(1)">
                                    <i class="fa fa-edit"></i> Edit
                                </button>
                            </div>
                            <div class="w3-col w6 w3-margin-bottom">
                                <button class="w3-button w3-red w3-small w3-block" onclick="deleteProduct(1, 'Laptop Computer')">
                                    <i class="fa fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sample Admin Product Card 2 - Replace with dynamic content from database -->
            <div class="w3-col l4 m6 s12 w3-margin-bottom admin-product-card" data-name="wireless headphones" data-id="2">
                <div class="w3-card-4 w3-white">
                    <img src="https://dummyimage.com/300x200" alt="Product" style="width:100%">
                    <div class="w3-container">
                        <h4><b>Wireless Headphones</b></h4>
                        <p>Premium sound quality with noise cancellation.</p>
                        
                        <!-- Price and Discount Info -->
                        <div class="w3-row w3-margin-bottom">
                            <div class="w3-col w6">
                                <p><b>Price:</b> $199.99</p>
                                <p><b>Discount:</b> 0%</p>
                            </div>
                            <div class="w3-col w6">
                                <p><b>Final Price:</b> $199.99</p>
                                <p><b>Category:</b> Electronics</p>
                            </div>
                        </div>
                        
                        <!-- Admin Action Buttons -->
                        <div class="w3-row">
                            <div class="w3-col w6 w3-margin-bottom">
                                <button class="w3-button w3-blue w3-small w3-block" onclick="editProduct(2)">
                                    <i class="fa fa-edit"></i> Edit
                                </button>
                            </div>
                            <div class="w3-col w6 w3-margin-bottom">
                                <button class="w3-button w3-red w3-small w3-block" onclick="deleteProduct(2, 'Wireless Headphones')">
                                    <i class="fa fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sample Admin Product Card 3 - Replace with dynamic content from database -->
            <div class="w3-col l4 m6 s12 w3-margin-bottom admin-product-card" data-name="smartphone" data-id="3">
                <div class="w3-card-4 w3-white">
                    <img src="https://dummyimage.com/300x200" alt="Product" style="width:100%">
                    <div class="w3-container">
                        <h4><b>Smartphone</b></h4>
                        <p>Latest model with advanced camera features.</p>
                        
                        <!-- Price and Discount Info -->
                        <div class="w3-row w3-margin-bottom">
                            <div class="w3-col w6">
                                <p><b>Price:</b> $699.99</p>
                                <p><b>Discount:</b> 14%</p>
                            </div>
                            <div class="w3-col w6">
                                <p><b>Final Price:</b> $599.99</p>
                                <p><b>Category:</b> Mobile</p>
                            </div>
                        </div>
                        
                        <!-- Admin Action Buttons -->
                        <div class="w3-row">
                            <div class="w3-col w6 w3-margin-bottom">
                                <button class="w3-button w3-blue w3-small w3-block" onclick="editProduct(3)">
                                    <i class="fa fa-edit"></i> Edit
                                </button>
                            </div>
                            <div class="w3-col w6 w3-margin-bottom">
                                <button class="w3-button w3-red w3-small w3-block" onclick="deleteProduct(3, 'Smartphone')">
                                    <i class="fa fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Footer -->
    <footer class="w3-container w3-blue w3-center w3-padding-16">
        <p>&copy; 2024 Your Store Admin Panel. All rights reserved.</p>
    </footer>

    <script>
        // BACKEND HOOK: Replace these functions with actual database operations

        // Search functionality for admin products
        function searchAdminProducts() {
            const searchTerm = document.getElementById('adminSearchInput').value.toLowerCase();
            const productCards = document.querySelectorAll('.admin-product-card');
            
            productCards.forEach(card => {
                const productName = card.getAttribute('data-name').toLowerCase();
                const productDescription = card.querySelector('p').textContent.toLowerCase();
                
                if (productName.includes(searchTerm) || productDescription.includes(searchTerm) || searchTerm === '') {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Show add product form
        function showAddProductForm() {
            document.getElementById('productForm').style.display = 'block';
            document.getElementById('formTitle').textContent = 'Add New Product';
            document.getElementById('productFormElement').reset();
            document.getElementById('productId').value = '';
        }

        // Hide product form
        function hideProductForm() {
            document.getElementById('productForm').style.display = 'none';
        }

        // BACKEND HOOK: Edit product function - should load product data from database
        function editProduct(productId) {
            document.getElementById('productForm').style.display = 'block';
            document.getElementById('formTitle').textContent = 'Edit Product';
            document.getElementById('productId').value = productId;
            
            // BACKEND HOOK: Load product data from database by ID
            // Example: fetch('/api/products/' + productId).then(response => response.json()).then(data => populateForm(data));
            
            // Sample data population (replace with actual database call)
            if (productId == 1) {
                document.getElementById('productName').value = 'Laptop Computer';
                document.getElementById('productPrice').value = '999.99';
                document.getElementById('productDiscount').value = '15';
                document.getElementById('productDescription').value = 'High-performance laptop for work and gaming.';
                document.getElementById('productCategory').value = 'Computers';
                document.getElementById('productImage').value = 'https://dummyimage.com/300x200';
            }
        }

        // BACKEND HOOK: Delete product function - should send delete request to database
        function deleteProduct(productId, productName) {
            if (confirm('Are you sure you want to delete "' + productName + '"?')) {
                // BACKEND HOOK: Send DELETE request to database
                // Example: fetch('/api/products/' + productId, {method: 'DELETE'}).then(() => refreshProducts());
                
                console.log('Delete product ID:', productId);
                // Remove card from display (temporary - should refresh from database)
                const card = document.querySelector('[data-id="' + productId + '"]');
                if (card) card.remove();
            }
        }

        // BACKEND HOOK: Form submission handler
        document.getElementById('productFormElement').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const productData = Object.fromEntries(formData.entries());
            
            // BACKEND HOOK: Send POST (new) or PUT (edit) request to database
            const method = productData.productId ? 'PUT' : 'POST';
            const url = productData.productId ? '/api/products/' + productData.productId : '/api/products';
            
            console.log('Save product:', method, productData);
            
            // Example API call:
            // fetch(url, {
            //     method: method,
            //     headers: {'Content-Type': 'application/json'},
            //     body: JSON.stringify(productData)
            // }).then(() => {
            //     hideProductForm();
            //     refreshProducts();
            // });
            
            // Temporary success message
            alert('Product saved successfully! (Connect to database to persist changes)');
            hideProductForm();
        });

        // BACKEND HOOK: Function to load all products for admin view
        function loadAdminProducts() {
            // Example: fetch('/api/products').then(response => response.json()).then(data => displayAdminProducts(data));
            console.log('Load admin products from database');
        }

        // BACKEND HOOK: Function to refresh products after changes
        function refreshProducts() {
            loadAdminProducts();
        }

        // Load products when page loads
        // BACKEND HOOK: Uncomment and implement when connected to database
        // window.onload = loadAdminProducts;
    </script>
</body>
</html>